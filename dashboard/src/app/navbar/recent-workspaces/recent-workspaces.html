<div class="admin-navbar-menu recent-workspaces"
     ng-show="navbarRecentWorkspacesCtrl.getRecentWorkspaces().length">
  <section class="left-sidebar-menu" layout="column" layout-align="start start">

    <div class="navbar-section"
         flex layout="row" layout-align="start start">
      <span flex class="navbar-section-title">Recent workspaces</span>
    </div>

    <md-list layout="column">
      <md-list-item flex class="navbar-subsection-item"
                    ng-repeat="workspace in navbarRecentWorkspacesCtrl.getRecentWorkspaces()
                    | orderBy:['attributes.opening', 'attributes.updated']:'reverse'
                    | limitTo:5"
                    ng-class="{'recent-workspaces-last-opened': navbarRecentWorkspacesCtrl.isOpen(workspace.id)}">
        <navbar-dropdown-menu flex
                              navbar-dropdown-items="navbarRecentWorkspacesCtrl.getDropdownItems(workspace.id)"
                              navbar-dropdown-disabled="navbarRecentWorkspacesCtrl.getDropdownDisabled(workspace.id)"
                              navbar-dropdown-right-click
                              navbar-dropdown-external-class="recent-workspaces-menu"
                              navbar-dropdown-offset="30 22">
          <md-button nav-bar-selected flex che-reload-href
                     che-on-long-touch="navbarRecentWorkspacesCtrl.openLinkInNewTab(workspace.id)"
                     ng-href="{{navbarRecentWorkspacesCtrl.getIdeLink(workspace.id)}}" layout-align="left"
                     target="_self">
            <div class="navbar-item" layout="row" layout-align="start center">
              <workspace-status-indicator-circle
                che-status="navbarRecentWorkspacesCtrl.getWorkspaceStatus(workspace.id)"
                che-empty-circle="true"
                class="navbar-icon"
                title="{{navbarRecentWorkspacesCtrl.getWorkspaceStatus(workspace.id)}}"></workspace-status-indicator-circle>
            <span title="{{navbarRecentWorkspacesCtrl.getWorkspaceName(workspace.id)}}"
                  ng-class="{'recent-workspaces-stopped-workspace': navbarRecentWorkspacesCtrl.getWorkspaceStatus(workspace.id) === 'STOPPED'}">{{navbarRecentWorkspacesCtrl.getWorkspaceName(workspace.id)}}</span>
            </div>
          </md-button>
        </navbar-dropdown-menu>
      </md-list-item>
    </md-list>
  </section>
</div>
